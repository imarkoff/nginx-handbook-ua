# Конфігурація

NGINX - веб-сервер, який використовується для надання статичного та динамічного вмісту клієнтам. Його поведінку, як правило, контролюють конфігураційні файли.

Конфігураційні файли NGINX мають розширення `.conf` та знаходяться за замовчуванням у каталозі `/etc/nginx/`.

---

Для початку перейдіть до цього каталогу та виведіть список всіх файлів за допомогою наступних команд:

```bash
cd /etc/nginx
ls -lh
```

У списку файлів має бути один з назвою `nginx.conf`. Це головний конфігураційний файл NGINX, його вміст можна переглянути за допомогою команди `cat`:

```bash
cat nginx.conf
```

Для початку можна створити резервну копію головного конфігураційного файлу та створити новий порожній файл за допомогою наступних команд:

```bash
# переіменовує файл
sudo mv nginx.conf nginx.conf.backup

# створює новий файл
sudo touch nginx.conf
```

Відкрийте новий файл у текстовому редакторі `nano` за допомогою наступної команди:

```bash
sudo nano nginx.conf
```

Тепер можна змінити вміст файлу таким чином:

```bash
events {

}

http {

    server {

        listen 80;
        server_name localhost;

        return 200 "Hello, world!\n";
    }
```

Після написання нового конфігураційного файлу або оновлення старого, перше, що потрібно зробити, це перевірити файл на наявність синтаксичних помилок. NGINX містить опцію `-t` для цього.

```bash
sudo nginx -t

# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
# nginx: configuration file /etc/nginx/nginx.conf test is successful
```

Якщо у вас є помилки, ця команда повідомить вам про них, включно з номером рядка.

---

При тому, що з нашим конфігураційним файлом все гаразд, NGINX не використовуватиме його. Принцип роботи NGINX полягає у тому, що він читає конфігураційний файл один раз і продовжує працювати на його основі.

Якщо ви оновлюєте конфігураційний файл, то вам доведеться явно сказати NGINX перезавантажити конфігураційний файл. Зробити це можна двома способами.

- Перезапустити службу NGINX, виконавши команду `sudo systemctl restart nginx`.
- Надіслати сигнал перезавантаження до NGINX, виконавши команду `sudo nginx -s reload`.

Параметр `-s` використовується для надсилання різних сигналів до NGINX. Доступними сигналами є `stop`, `quit`, `reload` і `reopen`. 

---

Після перезавантаження конфігураційного файлу, його можна побачити в дії, відправивши простий запит на сервер:

```bash
curl -i localhost

# HTTP/1.1 200 OK
# Server: nginx/1.18.0 (Ubuntu)
# Date: Wed, 21 Apr 2021 10:03:33 GMT
# Content-Type: text/plain
# Content-Length: 18
# Connection: keep-alive

# Hello, world!
```

Сервер відповідає кодом статусу `200` та очікуваним повідомленням.

---

Пояснення принципів конфігурації доступні нижче:

[Директиви](%D0%9A%D0%BE%D0%BD%D1%84%D1%96%D0%B3%D1%83%D1%80%D0%B0%D1%86%D1%96%D1%8F%2040fb874e71e343ff8e39b4a39cb80a16/%D0%94%D0%B8%D1%80%D0%B5%D0%BA%D1%82%D0%B8%D0%B2%D0%B8%20c86a3dd5c56b4701a12f7e95bba45c5a.md)

[Змінні та їх використання](%D0%9A%D0%BE%D0%BD%D1%84%D1%96%D0%B3%D1%83%D1%80%D0%B0%D1%86%D1%96%D1%8F%2040fb874e71e343ff8e39b4a39cb80a16/%D0%97%D0%BC%D1%96%D0%BD%D0%BD%D1%96%20%D1%82%D0%B0%20%D1%96%CC%88%D1%85%20%D0%B2%D0%B8%D0%BA%D0%BE%D1%80%D0%B8%D1%81%D1%82%D0%B0%D0%BD%D0%BD%D1%8F%20e6c4e7b92908476391290b186379ba25.md)

---

Джерела:

[https://www.freecodecamp.org/news/the-nginx-handbook/](https://www.freecodecamp.org/news/the-nginx-handbook/)