# Змінні та їх використання

В NGINX можна використовувати змінні, щоб зберігати та використовувати значення під час обробки запиту. Змінні починаються з символу `$`, а потім йдуть ім'я змінної. Наприклад: `$variable`.

Змінні можуть бути трьох типів:

- Рядки `set $name "Farhan"`
- Цілі числа `set $age 25`
- Булеві `set $is_working true`

Змінні можуть бути використані для:

- **Збереження значень:** Використовуйте директиву `set` для збереження значень у змінні.
    
    ```bash
    set $my_variable "my_value";
    ```
    
- **Динамічного формування значень:** Використовуйте змінні, щоб формувати значення на основі даних запиту, даних клієнта або інших даних.
    
    ```bash
    set $my_variable $arg_id;
    ```
    
- **Передачі значень іншим директивам:** Використовуйте змінні для передачі значень іншим директивам, наприклад, `proxy_pass` або `return`.
    
    ```bash
    proxy_pass <http://backend/$my_variable>;
    return 200 $my_variable;
    ```
    
- **Використання в умовах:** Змінні можуть бути використані в умовах, щоб приймати рішення на основі значень.
    
    ```bash
    if ($my_variable = "my_value") {
        # do something
    }
    
    ```
    

Важливо пам'ятати, що змінні в NGINX мають область видимості. Наприклад, якщо змінна була визначена в одному блоку, то вона не буде доступна в іншому блоку.

---

Окрім змінних, які оголошуютьс, у NGINX існують вбудовані змінні. Повний список доступний в [офіційній документації](https://nginx.org/en/docs/varindex.html).

**Приклад:**

```bash
events {
}

http {
	server {

    listen 80;
    server_name localhost;

    return 200 "Host - $host\nURI - $uri\nArgs - $args\n";
	}
}
```

- `$host` містить кореневу адресу
- `$uri` містить запитуваний URI відносно кореня.
- `$args` містить всі рядки запиту.

Тепер при відправці запиту до сервера отримується така відповідь:

```bash
curl http://localhost/user?name=Farhan

# Host - localhost
# URI - /user
# Args - name=Farhan
```

Замість того, щоб виводити рядки запиту в буквальному вигляді, можна отримати доступ до окремих значень за допомогою змінної `$arg`.

```bash
events {
}

http {
	server {

    listen 80;
    server_name localhost;

    set $name $arg_name; # $arg_<рядок запиту name>

    return 200 "Name - $name\n";
	}
}
```

Тепер відповідь від сервера виглядає так:

```bash
curl [http://localhost?name=Farhan](http://nginx-handbook.test/?name=Farhan)

#Name - Farhan
```

Подібні змінні вбудовуються в модуль `ngx_http_core_module`. Щоб вбудовані змінні були доступні в конфігурації, NGINX повинен бути [зібраний](../%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%BD%D1%8F%2019a5232e3dd5456f8147fb37001e92dd/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%20%D1%82%D0%B0%20%D0%BD%D0%B0%D0%BB%D0%B0%D1%88%D1%82%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F%207e1859516fe9420c9f09c2e9618af347.md) з цим модулем.