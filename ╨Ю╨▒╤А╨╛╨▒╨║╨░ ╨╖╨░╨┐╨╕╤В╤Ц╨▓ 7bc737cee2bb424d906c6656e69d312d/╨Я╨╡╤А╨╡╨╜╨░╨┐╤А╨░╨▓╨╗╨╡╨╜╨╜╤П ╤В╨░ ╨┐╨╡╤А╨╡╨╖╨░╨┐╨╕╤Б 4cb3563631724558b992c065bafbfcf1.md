# Перенаправлення та перезапис

У NGINX є можливість налаштувати перенаправлення та перезапис запитів. Це може бути корисно в різних сценаріях, наприклад, для зміни URL-адресу, перенаправлення HTTP-запитів на HTTPS або для встановлення правил перезапису запитів.

---

Перенаправлення відбувається за допомогою директиви `return`, яка дозволяє вказати [HTTP-статус відповіді](%D0%A1%D1%82%D0%B0%D1%82%D1%83%D1%81-%D0%BA%D0%BE%D0%B4%D0%B8%20af0fb8a255d04774a59773230690075e.md) та новий URL-адрес для перенаправлення.

```bash
location /old-url {
    return 301 <https://example.com/new-url>;
}
```

Також можна використовувати вбудовані змінні для перенаправлення та перезапису запитів.

```bash
server {
    listen 80;
    server_name example.com;
    return 301 https://example.com$request_uri;
}
```

---

Для перезапису запитів можна використовувати директиву `rewrite`. Ця директива дозволяє змінити запит перед його обробкою. Тобто вона змінює URI внутрішньо, не повідомляючи користувача про це.

Для того щоб перезаписати запит `/product/123` на `/product?id=123`, можна використовувати наступну директиву:

```bash
location /product {
    rewrite ^/product/(\\d+)$ /product?id=$1 break;
}
```

Перезапис запитів з використанням регулярних виразів:

```bash
location ~* pattern {
    rewrite replacement;
}
```